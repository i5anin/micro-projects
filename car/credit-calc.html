<!DOCTYPE html>
<html lang="ru" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>–ö—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-body">

<div class="container py-5">
    <h1 class="mb-4">üöó –ö—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ø–æ —Å—Ç–∞–≤–∫–µ –¶–ë</h1>

    <form id="form" class="row g-3">
        <div class="col-md-6">
            <label class="form-label">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ</label>
            <input type="number" class="form-control" id="price" value="2894190" required>
        </div>
        <div class="col-md-6">
            <label class="form-label">üíµ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å (%)</label>
            <input type="number" class="form-control" id="initialPercent" value="70" step="0.01" required>
        </div>
        <div class="col-md-6">
            <label class="form-label">üìÜ –°—Ä–æ–∫ –∫—Ä–µ–¥–∏—Ç–∞ (–º–µ—Å.)</label>
            <input type="number" class="form-control" id="months" value="36" required>
        </div>
        <div class="col-md-6">
            <label class="form-label">üìà –°—Ç–∞–≤–∫–∞ –ø–æ –¶–ë (% –≥–æ–¥–æ–≤—ã—Ö)</label>
            <input type="number" step="0.0001" class="form-control" id="annualRate" value="0.01" required>
        </div>
        <div class="col-md-6">
            <label class="form-label">üõ° –ö–ê–°–ö–û</label>
            <input type="number" class="form-control" id="casco" value="70000" required>
        </div>
        <div class="col-md-6">
            <label class="form-label">üìÑ –§–∏–Ω–ø—Ä–æ–¥—É–∫—Ç—ã</label>
            <input type="number" class="form-control" id="financial" value="60000" required>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        </div>
    </form>

    <div id="output" class="mt-5"></div>
</div>

<script>
    const format = n => n.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ‚ÇΩ';

    document.getElementById("form").addEventListener("submit", function (e) {
        e.preventDefault();

        const price = +document.getElementById("price").value;
        const initialPercent = +document.getElementById("initialPercent").value;
        const months = +document.getElementById("months").value;
        const annualRate = +document.getElementById("annualRate").value;
        const casco = +document.getElementById("casco").value;
        const financial = +document.getElementById("financial").value;

        const downPayment = price * initialPercent / 100;
        const creditBody = price - downPayment;
        const totalLoan = creditBody + casco + financial;

        const r = (annualRate / 100) / 12;
        const numerator = r * Math.pow(1 + r, months);
        const denominator = Math.pow(1 + r, months) - 1;
        const k = numerator / denominator;

        const monthly = totalLoan * k;
        const overpayment = (monthly * months) - totalLoan;

        const output = `
        <div class="alert alert-secondary mb-4">
          <h3>üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è: <strong>${format(price)}</strong></h3>
          <p>üìà –°—Ç–∞–≤–∫–∞ –ø–æ –¶–ë: <strong>${annualRate.toFixed(2)}% –≥–æ–¥–æ–≤—ã—Ö</strong></p>
        </div>

        <div class="alert alert-secondary mb-4">
          <h4>üíµ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å</h4>
          <p>–ü—Ä–æ—Ü–µ–Ω—Ç: ${initialPercent}%</p>
          <p>–°—É–º–º–∞: <strong>${format(downPayment)}</strong></p>
        </div>

        <div class="alert alert-secondary mb-4">
          <h4>üí≥ –ö—Ä–µ–¥–∏—Ç–Ω–∞—è —á–∞—Å—Ç—å</h4>
          <ul>
            <li>–¢–µ–ª–æ –∫—Ä–µ–¥–∏—Ç–∞: ${format(creditBody)}</li>
            <li>–ö–ê–°–ö–û: ${format(casco)}</li>
            <li>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã: ${format(financial)}</li>
            <li><strong>–ü–æ–ª–Ω–∞—è —Å—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞: ${format(totalLoan)}</strong></li>
          </ul>
        </div>

        <div class="alert alert-secondary mb-4">
          <h4>üìÖ –ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂ (–∞–Ω–Ω—É–∏—Ç–µ—Ç)</h4>
          <p class="formula">–ü–ª–∞—Ç—ë–∂ = ${format(totalLoan)} √ó ${k.toFixed(10)} = <strong>${format(monthly)}</strong></p>
        </div>

<div class="alert alert-secondary mb-4">
  üìÑ –ü–µ—Ä–µ–ø–ª–∞—Ç–∞ –∑–∞ ${months} –º–µ—Å. (${(months / 12).toFixed(1)} –≥–æ–¥–∞): <strong>${format(overpayment)}</strong>
</div>
      `;

        document.getElementById("output").innerHTML = output;
    });
</script>
</body>
</html>
